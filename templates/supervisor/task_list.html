<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Task List - Role-Craft</title>
  <link rel="stylesheet" href="/static/supervisor/task_list.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
  <div class="dashboard-container">
    <!-- Sidebar -->
    <nav class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <img src="../static/assests/logo.png" alt="Role-Craft" onerror="this.style.display='none'">
          <span>Supervisor</span>
        </div>
      </div>
      <ul class="sidebar-menu">
        <li><a href="{{ url_for('supervisor_dashboard') }}"><i class="fas fa-home"></i> Dashboard</a></li>
        <li class="active"><a href="{{ url_for('task_list') }}"><i class="fas fa-tasks"></i> All Tasks</a></li>
        <li><a href="{{ url_for('task_create') }}"><i class="fas fa-plus-circle"></i> Create Task</a></li>
        <li><a href="{{ url_for('worker_performance') }}"><i class="fas fa-chart-line"></i> Performance</a></li>
        <li><a href="{{ url_for('notifications_supervisor') }}"><i class="fas fa-bell"></i> Notifications</a></li>
      </ul>
      <div class="sidebar-footer">
        <div class="user-info">
          <div class="user-avatar">SP</div>
          <div class="user-details">
            <span class="user-name">Supervisor</span>
            <span class="user-role">Team Lead</span>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
      <header class="content-header">
        <h1>All Tasks</h1>
        <div class="filters">
          <a href="{{ url_for('task_list') }}">All</a>
          <a href="{{ url_for('task_list', status='pending') }}">Pending</a>
          <a href="{{ url_for('task_list', status='in-progress') }}">In Progress</a>
          <a href="{{ url_for('task_list', status='completed') }}">Completed</a>
        </div>
      </header>

      <div class="content-body">
        <table class="task-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Title</th>
              <th>Assignee</th>
              <th>Status</th>
              <th>Priority</th>
              <th>Due Date</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for task in tasks %}
            <tr>
              <td>{{ task.id }}</td>
              <td>{{ task.name }}</td>
              <td>{{ task.assigned_worker.name if task.assigned_worker else 'Unassigned' }}</td>
              <td><span class="status-badge {{ task.status|lower }}">{{ task.status|capitalize }}</span></td>
              <td><span class="priority-badge {{ task.priority|lower }}">{{ task.priority|capitalize }}</span></td>
              <td>{{ task.due_date.strftime('%Y-%m-%d') if task.due_date else 'â€”' }}</td>
              <td>
                <a href="{{ url_for('supervisor_task_details', task_id=task.id) }}" 
                   class="btn btn-sm btn-primary">
                   View
                </a>
              </td>
            </tr>
            {% else %}
            <tr><td colspan="7">No tasks found.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </main>
  </div>

  <script src="/static/supervisor/task_list.js"></script>
</body>
</html>
